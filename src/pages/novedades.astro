---
// src/pages/novedades.astro
import BaseLayout from "../layouts/BaseLayout.astro";
import BlogCard from "../components/contacto/BlogCard.astro";
import { getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";
import "../styles/global.css"

type BlogEntry = CollectionEntry<"blog">;
const posts: BlogEntry[] = await getCollection("blog");
---

<BaseLayout title="Novedades | Blog y Artículos">
  <style is:global>
    .blog-page {
      --primary: 15, 23, 42;
      --secondary: 30, 41, 59;
      --accent: 59, 130, 246;
      --light: 241, 245, 249;
    }
    
    .blog-hero {
      background: linear-gradient(135deg, rgba(var(--primary), 0.9) 0%, rgba(var(--secondary), 0.9) 100%);
    }
    
    .blog-card {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      transition: all 0.3s ease;
    }
    
    .blog-card:hover {
      background: rgba(255, 255, 255, 0.08);
      transform: translateY(-5px);
    }
  </style>

  <div class="blog-page bg-[#0f172a] text-gray-200 min-h-screen mt-20">
    <!-- Hero Section -->
    <section class="blog-hero py-20 px-4 text-center relative overflow-hidden">
      <div class="absolute inset-0 opacity-5 bg-[url('https://assets.website-files.com/5e51b3b0337309d672efd94c/5e51ccb1d7d69c3a0a3d8683_noise.png')]"></div>
      <div class="max-w-4xl mx-auto relative">
        <h1 class="text-4xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-blue-400 to-purple-300 bg-clip-text text-transparent">
            Nuestro Blog</h1>
        <p class="text-xl text-gray-300 max-w-2xl mx-auto">
          Mantente actualizado con las últimas tendencias, consejos y noticias del mundo del desarrollo web y diseño digital.
        </p>
      </div>
    </section>

    <!-- Blog Content -->
    <section class="py-16 px-4">
      <div class="max-w-7xl mx-auto">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
          <!-- Main Content -->
          <div class="lg:col-span-2">
            <h2 class="text-2xl font-bold text-white mb-8">Artículos recientes</h2>
            
            <div class="space-y-8">
              {posts.slice(0, 3).map((post) => (
                <BlogCard post={post} featured={true} />
              ))}
            </div>
            
            <div class="mt-12">
              <h2 class="text-2xl font-bold text-white mb-8">Todos los artículos</h2>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                {posts.slice(3).map((post) => (
                  <BlogCard post={post} />
                ))}
              </div>
            </div>
            
            <div class="mt-12 flex justify-center">
              <button class="px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-all">
                Cargar más artículos
              </button>
            </div>
          </div>
          
          <!-- Sidebar -->
          <div class="space-y-8">
            <!-- Categories -->
            <div class="blog-card rounded-2xl p-6">
              <h3 class="text-xl font-bold text-white mb-6 pb-3 border-b border-gray-700">Categorías</h3>
              <ul class="space-y-3">
                <li class="flex justify-between items-center py-2 border-b border-gray-700/50">
                  <a href="#" class="text-gray-300 hover:text-white transition-colors">Desarrollo Web</a>
                  <span class="bg-blue-500/20 text-blue-400 text-xs px-2 py-1 rounded-full">12</span>
                </li>
                <li class="flex justify-between items-center py-2 border-b border-gray-700/50">
                  <a href="#" class="text-gray-300 hover:text-white transition-colors">Diseño UX/UI</a>
                  <span class="bg-blue-500/20 text-blue-400 text-xs px-2 py-1 rounded-full">8</span>
                </li>
                <li class="flex justify-between items-center py-2 border-b border-gray-700/50">
                  <a href="#" class="text-gray-300 hover:text-white transition-colors">Tecnologías</a>
                  <span class="bg-blue-500/20 text-blue-400 text-xs px-2 py-1 rounded-full">15</span>
                </li>
                <li class="flex justify-between items-center py-2">
                  <a href="#" class="text-gray-300 hover:text-white transition-colors">Consejos</a>
                  <span class="bg-blue-500/20 text-blue-400 text-xs px-2 py-1 rounded-full">7</span>
                </li>
              </ul>
            </div>
            
            <!-- Popular Posts -->
            <div class="blog-card rounded-2xl p-6">
              <h3 class="text-xl font-bold text-white mb-6 pb-3 border-b border-gray-700">Artículos populares</h3>
              <div class="space-y-4">
                {posts.slice(0, 3).map((post) => (
                  <a href={`/novedades/${post.slug}`} class="flex items-center gap-4 group">
                    <div class="w-16 h-16 flex-shrink-0 rounded-lg overflow-hidden">
                      <img 
                        src={post.data.imagen} 
                        alt={post.data.titulo} 
                        class="w-full h-full object-cover"
                        loading="lazy"
                      />
                    </div>
                    <div>
                      <h4 class="text-white font-medium group-hover:text-blue-400 transition-colors">{post.data.titulo}</h4>
                      <p class="text-gray-400 text-sm">{post.data.fecha}</p>
                    </div>
                  </a>
                ))}
              </div>
            </div>
            
            <!-- Newsletter -->
            <div class="blog-card rounded-2xl p-6 bg-gradient-to-br from-blue-600/10 to-purple-600/10 border border-blue-500/30">
              <h3 class="text-xl font-bold text-white mb-4">Suscríbete al newsletter</h3>
              <p class="text-gray-300 mb-6">Recibe las últimas novedades y artículos directamente en tu correo.</p>
              <form class="space-y-4">
                <input 
                  type="email" 
                  placeholder="Tu email" 
                  class="w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                  required
                />
                <button 
                  type="submit"
                  class="w-full px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-all"
                >
                  Suscribirme
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</BaseLayout>